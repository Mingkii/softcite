@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .

@prefix ca: <http://floss.syr.edu/ontologies/2008/4/contentAnalysis.owl#> .
@prefix doap: <http://usefulinc.com/ns/doap#> .

@prefix bioj: <http://james.howison.name/ontologies/bio-journal-sample#> .
@prefix citec: <http://james.howison.name/ontologies/software-citation-coding#> .
@prefix bioj-cited: <http://james.howison.name/ontologies/bio-journal-sample-citation#> .

@prefix dc: <http://dublincore.org/documents/2012/06/14/dcmi-terms/> .

@prefix sp:      <http://spinrdf.org/sp#> .
@prefix spin:    <http://spinrdf.org/spin#> .
@prefix spl:     <http://spinrdf.org/spl#> .

<http://james.howison.name/ontologies/software-citation-coding-constraints>
  rdf:type owl:Ontology ;
  owl:imports <http://purl.org/dc/terms/> ;
  owl:imports <http://spinrdf.org/spl> .

bioj:ArticleSoftwareLink a rdfs:Class ;
	# spin:constraint
	#               [ a       spl:Attribute ;
	#                 rdfs:comment "Must have one and exactly one has_version_indicator "^^xsd:string ;
	# 				rdfs:label "Must have one and exactly one has_version_indicator "^^xsd:string ;
	#                 spl:predicate citec:has_version_indicator ;
	#                 spl:minCount 1 ;
	#                 spl:maxCount 1 ;
	#                 spl:valueType xsd:boolean ;
	#                # spl:defaultValue ex:Red
	#               ] ;

	spin:constraint
	            [ a       spl:Attribute ;
	              rdfs:comment "Must only mention 1 piece of software "^^xsd:string ;
	              spl:predicate bioj:mentions_software;
	              spl:minCount 1 ;
	              spl:maxCount 1 ;
	              # spl:valueType citec:MentionClassification ;
	             # spl:defaultValue ex:Red
	            ] ;

	spin:constraint
	          [ a       sp:Construct ;
	            sp:text """
	                CONSTRUCT {
	                    _:violation a spin:ConstraintViolation ;
	                         spin:violationRoot ?this ;
	                         spin:violationPath citec:version_is_findable ;
	                         rdfs:label "Can only find versions if they exist"
	                }
	                WHERE {
						?this a bioj:ArticleSoftwareLink ;
				              citec:has_version_indicator false ;
							  citec:version_is_findable true .
				    }"""
	          ] ;
.

bioj:SoftwareMention a rdfs:Class ;
#
# spin:constraint
#               [ a       spl:Attribute ;
#                 rdfs:comment "Must have one and exactly one classification "^^xsd:string ;
#                 spl:predicate citec:mention_category ;
#                 spl:minCount 1 ;
#                 spl:maxCount 1 ;
#                 # spl:valueType citec:MentionClassification ;
#                # spl:defaultValue ex:Red
#               ] ;
# spin:constraint
#           [ a       sp:Construct ;
#             sp:text """
#                 CONSTRUCT {
#                     _:violation a spin:ConstraintViolation ;
#                          spin:violationRoot ?this ;
#                          rdfs:label "Cannot have matched cite if no citation" ;
#                 }
#                 WHERE {
# 					?this citec:has_citation false ;
# 						  citec:matches_preferred_cite true .
# 			    }"""
#           ] ;		  
.

# bioj:SoftwarePackage a rdfs:Class ;
#
# 	spin:constraint
# 	              [ a       spl:Attribute ;
# 	             #   rdfs:comment "Must have one and exactly is_accessible "^^xsd:string ;
# 	                spl:predicate citec:is_accessible  ;
# 	                spl:minCount 1 ;
# 	                spl:maxCount 1 ;
# 	                spl:valueType xsd:boolean ;
# 				   ] ;
# 	spin:constraint
# 	             [ a       spl:Attribute ;
# 	             #  rdfs:comment "Must have one and exactly is_accessible "^^xsd:string ;
# 	               spl:predicate citec:is_explicitly_modifiable  ;
# 	               spl:minCount 1 ;
# 	               spl:maxCount 1 ;
# 	               spl:valueType xsd:boolean ;
# 			   ] ;
#    	spin:constraint
#    	             [ a       spl:Attribute ;
#    	             #  rdfs:comment "Must have one and exactly is_accessible "^^xsd:string ;
#    	               spl:predicate citec:is_free   ;
#    	               spl:minCount 1 ;
#    	               spl:maxCount 1 ;
#    	               spl:valueType xsd:boolean ;
#    			   ] ;
#   	spin:constraint
#   	             [ a       spl:Attribute ;
#   	               #rdfs:comment "Must have one and exactly is_accessible "^^xsd:string ;
#   	               spl:predicate citec:is_source_accessible   ;
#   	               spl:minCount 1 ;
#   	               spl:maxCount 1 ;
#   	               spl:valueType xsd:boolean ;
#   			   ] ;
#
# .


